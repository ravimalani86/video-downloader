<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Instagram Video Downloader</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Inter', sans-serif; margin: 0; background: #f9fafc; color: #333; }

  /* Navbar */
  header { background: #fff; padding: 12px 20px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); position: sticky; top: 0; z-index: 10; }
  header .logo { font-weight: 600; font-size: 20px; color: #4a90e2; text-decoration: none; }
  header nav { float: right; }
  header nav a { margin-left: 15px; text-decoration: none; color: #333; font-weight: 500; }
  header nav a:hover { color: #4a90e2; }

  /* Hero Section */
  .hero { text-align: center; padding: 50px 20px; background: linear-gradient(135deg, #4a90e2, #357ab8); color: #fff; }
  .hero h1 { font-size: 32px; margin-bottom: 15px; font-weight: 600; }
  .hero p { font-size: 16px; max-width: 600px; margin: 0 auto; }

  /* Form Section */
  .tool-section { max-width: 800px; margin: -40px auto 30px; background: #fff; padding: 25px 20px; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); }
  form { display: flex; flex-direction: column; gap: 12px; }
  input[type="text"] { padding: 12px 15px; font-size: 16px; border-radius: 8px; border: 1px solid #ddd; transition: border 0.3s; }
  input[type="text"]:focus { border-color: #4a90e2; outline: none; }
  button { padding: 12px; font-size: 16px; background-color: #4a90e2; color: #fff; border: none; border-radius: 8px; cursor: pointer; transition: background 0.3s; }
  button:hover { background-color: #357ab8; }

  .error { background: #ffe0e0; color: #c20000; padding: 10px; border-radius: 8px; text-align: center; }

  /* Preview */
  .preview { margin-top: 25px; text-align: center; }
  .preview video { width: 100%; max-width: 500px; border-radius: 8px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
  .preview a { display: inline-block; margin-top: 12px; padding: 10px 18px; background: #4a90e2; color: #fff; text-decoration: none; border-radius: 6px; transition: background 0.3s; }
  .preview a:hover { background: #357ab8; }

  /* Features Section */
  .features { padding: 40px 20px; background: #fff; }
  .features h2 { text-align: center; font-size: 24px; margin-bottom: 30px; }
  .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
  .feature { background: #f5f7fa; padding: 20px; border-radius: 10px; text-align: center; }
  .feature h3 { margin-bottom: 10px; color: #4a90e2; font-size: 18px; }

  /* Footer */
  footer { background: #222; color: #aaa; padding: 20px; text-align: center; font-size: 14px; margin-top: 40px; }
  footer a { color: #4a90e2; text-decoration: none; }
  footer a:hover { text-decoration: underline; }

  /* Loader */
  .loader-overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.3); z-index: 9999; }
  .loader-overlay .spinner { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); border: 6px solid #f3f3f3; border-top: 6px solid #4a90e2; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
  @keyframes spin { 0%{ transform: rotate(0deg);} 100%{ transform: rotate(360deg);} }

  @media(max-width:600px) {
    .hero h1 { font-size: 24px; }
    .tool-section { margin: -30px 15px 20px; padding: 20px; }
    input[type="text"], button { font-size: 14px; padding: 10px; }
  }
</style>
</head>
<body>

<!-- Navbar -->
<header>
  <a href="/" class="logo">InstaSave</a>
  <nav>
    <a href="#features">Features</a>
    <a href="#howto">How to Use</a>
    <a href="#footer">Contact</a>
  </nav>
</header>

<!-- Hero -->
<section class="hero">
  <h1>Download Instagram Videos Instantly</h1>
  <p>Paste the Instagram link below and download reels, posts, and videos in high quality. Fast, free, and secure!</p>
</section>

<!-- Tool Form -->
<div class="tool-section">
  <form id="downloadForm">
    <input type="text" name="url" id="urlInput" placeholder="Paste Instagram post/reel link here" required>
    <button type="submit">Download Video</button>
  </form>
  <div id="errorBox" class="error" style="display:none;"></div>
  <div id="previewBox" class="preview" style="display:none;"></div>
</div>

<!-- Features -->
<section class="features" id="features">
  <h2>Why Use InstaSave?</h2>
  <div class="features-grid">
    <div class="feature"><h3>üöÄ Fast</h3><p>Instant video downloads with one click.</p></div>
    <div class="feature"><h3>üé• HD Quality</h3><p>Download videos in the best available quality.</p></div>
    <div class="feature"><h3>üîí Secure</h3><p>No login required, your privacy is safe.</p></div>
    <div class="feature"><h3>üíª Cross Platform</h3><p>Works on mobile, tablet, and desktop.</p></div>
  </div>
</section>

<!-- How To Use -->
<section class="features" id="howto">
  <h2>How to Download?</h2>
  <div class="features-grid">
    <div class="feature"><h3>1Ô∏è‚É£ Copy Link</h3><p>Go to Instagram, copy the post/reel link.</p></div>
    <div class="feature"><h3>2Ô∏è‚É£ Paste Link</h3><p>Paste the copied link in the box above.</p></div>
    <div class="feature"><h3>3Ô∏è‚É£ Download</h3><p>Click the button and save your video instantly.</p></div>
  </div>
</section>

<!-- Footer -->
<footer id="footer">
  <p>¬© 2025 InstaSave. Built with ‚ù§Ô∏è by RM Solutions. Not affiliated with Instagram. <br>
  <a href="#">Privacy Policy</a> | <a href="#">Terms of Use</a></p>
</footer>

<!-- Loader -->
<div class="loader-overlay" id="loader"><div class="spinner"></div></div>

<script>
  const form = document.getElementById('downloadForm');
  const loader = document.getElementById('loader');
  const errorBox = document.getElementById('errorBox');
  const previewBox = document.getElementById('previewBox');

  form.addEventListener('submit', function(e) {
    e.preventDefault();
    errorBox.style.display = 'none';
    previewBox.style.display = 'none';
    loader.style.display = 'block';
    const url = document.getElementById('urlInput').value.trim();
    fetch('/api/download', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ url })
    })
    .then(res => res.json())
    .then(data => {
      loader.style.display = 'none';
      if (!data.flag || !data.videoUrl) {
        errorBox.textContent = '‚ùå ' + (data.error || 'No downloadable video found for this link.');
        errorBox.style.display = 'block';
        previewBox.style.display = 'none';
      } else {
        previewBox.innerHTML = `
          <h3>Video Preview</h3>
          ${data.thumbnailUrl ? `<img id='thumbImg' src="${data.thumbnailUrl}" alt="Thumbnail" style="max-width:300px;border-radius:8px;box-shadow:0 3px 10px rgba(0,0,0,0.1);margin-bottom:12px;" />` : ''}
          <video id='videoPreview' controls poster="${data.thumbnailUrl || ''}">
            <source src="${data.videoUrl}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <br>
          <a href="${data.videoUrl}" download>‚¨áÔ∏è Download Video</a>
        `;
        previewBox.style.display = 'block';
        errorBox.style.display = 'none';

        // If thumbnail fails to load, hide it and show video as main preview
        const thumbImg = document.getElementById('thumbImg');
        if (thumbImg) {
          thumbImg.onerror = function() {
            thumbImg.style.display = 'none';
            // Optionally, you could add a border or highlight to the video
          };
        }
      }
    })
    .catch(() => {
      loader.style.display = 'none';
      errorBox.textContent = '‚ùå Failed to connect to server.';
      errorBox.style.display = 'block';
      previewBox.style.display = 'none';
    });
  });
</script>

</body>
</html>
