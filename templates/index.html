<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Instagram Video Downloader</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Inter', sans-serif; background-color: #f5f7fa; color: #333; margin: 0; padding: 0; }
  .container { max-width: 700px; margin: 25px auto; padding: 10px; } /* margin/padding halved */
  h2 { text-align: center; font-weight: 600; margin-bottom: 15px; color: #111; }
  
  /* Card */
  .card { background: #fff; padding: 15px 12px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); } /* half padding/shadow */
  form { display: flex; flex-direction: column; gap: 8px; } /* gap halved */
  input[type="text"] { padding: 8px 10px; font-size: 14px; border-radius: 6px; border: 1px solid #ddd; transition: border 0.3s; }
  input[type="text"]:focus { border-color: #4a90e2; outline: none; }
  button { padding: 8px; font-size: 14px; background-color: #4a90e2; color: #fff; border: none; border-radius: 6px; cursor: pointer; transition: background 0.3s; }
  button:hover { background-color: #357ab8; }
  
  .error { background: #ffe0e0; color: #c20000; padding: 8px 10px; border-radius: 6px; margin-top: 10px; text-align: center; }

  /* Preview */
  .preview-card { background: #fff; padding: 10px 15px; margin-top: 15px; border-radius: 12px; box-shadow: 0 3px 12px rgba(0,0,0,0.08); text-align: center; }
  .preview-card video { width: 100%; border-radius: 6px; }
  .preview-card a { display: inline-block; margin-top: 10px; text-decoration: none; background-color: #4a90e2; color: #fff; padding: 8px 15px; border-radius: 6px; transition: background 0.3s; }
  .preview-card a:hover { background-color: #357ab8; }

  /* Loader */
  .loader-overlay {
    display: none;
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.3); z-index: 9999; text-align: center;
  }
  .loader-overlay .spinner {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    border: 6px solid #f3f3f3; /* smaller */
    border-top: 6px solid #4a90e2;
    border-radius: 50%;
    width: 40px; height: 40px; /* smaller */
    animation: spin 1s linear infinite;
  }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

  /* Mobile adjustments */
  @media (max-width: 500px) {
    .container { margin: 8px; padding: 8px; }
    .card, .preview-card { padding: 12px; }
    button, input[type="text"] { font-size: 13px; padding: 6px; }
    .preview-card a { padding: 6px 12px; font-size: 13px; }
  }
</style>
</head>
<body>

<div class="container">
  <h2>Instagram Video Downloader</h2>

  <div class="card">
    <form method="POST" id="downloadForm">
      <input type="text" name="url" placeholder="Paste Instagram post/reel link here" required>
      <button type="submit">Download Video</button>
    </form>

    {% if error %}
      <div class="error">❌ {{ error }}</div>
    {% endif %}
  </div>

  {% if preview %}
    <div class="preview-card">
      <h3>Video Preview</h3>
      <video controls autoplay>
        <source src="{{ preview }}" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <br>
      <a href="{{ preview }}" download>⬇️ Download Video</a>
    </div>
  {% endif %}
</div>

<!-- Loader Overlay -->
<div class="loader-overlay" id="loader">
  <div class="spinner"></div>
</div>

<script>
  const form = document.getElementById('downloadForm');
  const loader = document.getElementById('loader');

  form.addEventListener('submit', () => {
    loader.style.display = 'block';
  });
</script>

</body>
</html>
